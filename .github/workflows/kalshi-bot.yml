name: Kalshi 15m Bot

on:
  schedule:
    - cron: "*/5 * * * *"
  workflow_dispatch: {}

jobs:
  run-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    env:
      DRY_RUN: "false"
      LOG_DECISIONS: "true"
      DISCOVER_BTC_EVENTS: "true"
      DISCOVER_SERIES: "false"
      EVENT_SERIES_TICKERS: "KXBTC15M,KXETH15M,KXSOL15M"
      CRYPTO_ONLY: "true"
      CRYPTO_ASSETS: "BTC,ETH,SOL"
      COMBINED_MAX_PRICE: "1.0"
      TIME_IN_FORCE: "fill_or_kill"
      KALSHI_API_KEY: ${{ secrets.KALSHI_API_KEY }}
      KALSHI_PRIVATE_KEY_PEM: ${{ secrets.KALSHI_PRIVATE_KEY_PEM }}
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    steps:
      - uses: actions/checkout@v4
      - uses: dtolnay/rust-toolchain@stable
      - name: Run bot
        run: cargo run --release
